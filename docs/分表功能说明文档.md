# EasyJava åˆ†è¡¨åŠŸèƒ½å®Œæ•´è¯´æ˜æ–‡æ¡£

## æ¦‚è¿°

EasyJavaåˆ†è¡¨åŠŸèƒ½æä¾›äº†å¼ºå¤§ä¸”çµæ´»çš„æ•°æ®åº“åˆ†è¡¨è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§åˆ†è¡¨ç­–ç•¥ã€è·¨è¡¨å­—æ®µåˆ†è¡¨ã€è‡ªåŠ¨åˆ†è¡¨åˆ›å»ºç­‰åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»åˆ†è¡¨åŠŸèƒ½çš„é…ç½®ã€ä½¿ç”¨å’Œæœ€ä½³å®è·µã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **å¤šç§åˆ†è¡¨ç­–ç•¥**: æ”¯æŒhashã€modã€rangeã€timeå››ç§åˆ†è¡¨ç­–ç•¥
- **è·¨è¡¨å­—æ®µåˆ†è¡¨**: æ”¯æŒé€šè¿‡å…¶ä»–è¡¨çš„å­—æ®µæ¥æ„å»ºåˆ†è¡¨
- **è‡ªåŠ¨åˆ†è¡¨åˆ›å»º**: æ”¯æŒæ ¹æ®é…ç½®è‡ªåŠ¨åœ¨æ•°æ®åº“ä¸­åˆ›å»ºåˆ†è¡¨
- **äº¤äº’å¼é…ç½®**: æä¾›å‹å¥½çš„åˆ†è¡¨é…ç½®å‘å¯¼
- **é…ç½®éªŒè¯**: è‡ªåŠ¨éªŒè¯åˆ†è¡¨é…ç½®çš„æœ‰æ•ˆæ€§
- **ç‹¬ç«‹å¯åŠ¨å™¨**: æä¾›ç‹¬ç«‹çš„åˆ†è¡¨å¯åŠ¨ç±»ï¼Œæ— éœ€äº¤äº’å³å¯åˆ›å»ºåˆ†è¡¨

### ğŸ¯ é€‚ç”¨åœºæ™¯
- å¤§æ•°æ®é‡è¡¨çš„æ€§èƒ½ä¼˜åŒ–
- ç”¨æˆ·æ•°æ®æŒ‰ç”¨æˆ·IDåˆ†è¡¨
- è®¢å•æ•°æ®æŒ‰æ—¶é—´æˆ–ç”¨æˆ·åˆ†è¡¨
- æ—¥å¿—æ•°æ®æŒ‰æ—¶é—´åˆ†è¡¨
- å¤šç§Ÿæˆ·ç³»ç»Ÿçš„æ•°æ®éš”ç¦»

## å¿«é€Ÿå¼€å§‹

EasyJava åˆ†è¡¨åŠŸèƒ½æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

### æ–¹å¼ä¸€ï¼šäº¤äº’å¼é…ç½®ï¼ˆå¢å¼ºç‰ˆï¼‰
é€‚åˆåˆæ¬¡é…ç½®æˆ–éœ€è¦ä¿®æ”¹åˆ†è¡¨å‚æ•°çš„åœºæ™¯ï¼Œæä¾›å‹å¥½çš„äº¤äº’ç•Œé¢ã€‚

### æ–¹å¼äºŒï¼šç›´æ¥æ‰§è¡Œï¼ˆç”Ÿäº§ç‰ˆï¼‰
é€‚åˆç”Ÿäº§ç¯å¢ƒæˆ–è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œç›´æ¥è¯»å–é…ç½®æ–‡ä»¶æ‰§è¡Œåˆ†è¡¨ï¼Œæ— éœ€äº¤äº’ã€‚

---

### 1. äº¤äº’å¼é…ç½®æ–¹å¼

#### ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
# Windowsç”¨æˆ· - äº¤äº’å¼é…ç½®
sharding-start.bat config

# Linux/Macç”¨æˆ· - äº¤äº’å¼é…ç½®
chmod +x sharding-start.sh
./sharding-start.sh config
```

#### ä½¿ç”¨Javaå‘½ä»¤
```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# äº¤äº’å¼é…ç½®åˆ†è¡¨
java -cp target/classes com.easyjava.manager.ShardingManager config

# é€šè¿‡ä¸»ç¨‹åºå¯åŠ¨äº¤äº’å¼é…ç½®
java -cp target/classes com.easyjava.AppEnhanced sharding
```

### 2. ç›´æ¥æ‰§è¡Œæ–¹å¼ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

#### ä½¿ç”¨ä¸“å±å¯åŠ¨è„šæœ¬
```bash
# Windowsç”¨æˆ· - ç›´æ¥æ‰§è¡Œåˆ†è¡¨
sharding-execute.bat execute

# Linux/Macç”¨æˆ· - ç›´æ¥æ‰§è¡Œåˆ†è¡¨
chmod +x sharding-execute.sh
./sharding-execute.sh execute
```

#### ä½¿ç”¨Javaå‘½ä»¤
```bash
# ç›´æ¥æ‰§è¡Œåˆ†è¡¨åˆ›å»º
java -cp target/classes com.easyjava.sharding.ShardingExecutor

# éªŒè¯åˆ†è¡¨é…ç½®
java -cp target/classes com.easyjava.sharding.ShardingExecutor validate

# æ˜¾ç¤ºå½“å‰é…ç½®
java -cp target/classes com.easyjava.sharding.ShardingExecutor show

# æµ‹è¯•åˆ†è¡¨ç´¢å¼•è®¡ç®—
java -cp target/classes com.easyjava.sharding.ShardingExecutor test
```

#### é€šè¿‡ä¸»ç¨‹åºé›†æˆ
```bash
# ç›´æ¥æ‰§è¡Œåˆ†è¡¨ï¼ˆæ— äº¤äº’ï¼‰
java -cp target/classes com.easyjava.AppEnhanced auto-sharding

# éªŒè¯åˆ†è¡¨é…ç½®ï¼ˆæ— äº¤äº’ï¼‰
java -cp target/classes com.easyjava.AppEnhanced check-sharding
```

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®
é…ç½®æ–‡ä»¶ä½äº `src/main/resources/application.properties`

### åŸºç¡€é…ç½®é¡¹

```properties
# ========== åˆ†è¡¨é…ç½® ==========
# åˆ†è¡¨åŠŸèƒ½å¼€å…³
sharding.enabled=true

# åˆ†è¡¨ç­–ç•¥ç±»å‹: hash(å“ˆå¸Œåˆ†è¡¨), range(èŒƒå›´åˆ†è¡¨), time(æ—¶é—´åˆ†è¡¨), mod(å–æ¨¡åˆ†è¡¨)
sharding.strategy.type=hash

# åˆ†è¡¨æ•°é‡
sharding.table.count=8

# åˆ†è¡¨åç¼€æ ¼å¼: _0, _1, _2 ç­‰
sharding.table.suffix.format=_%d

# åˆ†è¡¨å†™å…¥æ•°æ®åº“é…ç½®
sharding.database.write.enabled=true

# åˆ†è¡¨SQLç”Ÿæˆé…ç½®
sharding.sql.generate.enabled=true

# åˆ†è¡¨å»ºè¡¨è¯­å¥å‰ç¼€
sharding.sql.create.prefix=CREATE TABLE IF NOT EXISTS

# æ˜¯å¦è‡ªåŠ¨åˆ›å»ºåˆ†è¡¨
sharding.auto.create.table=true
```

### è·¨è¡¨å­—æ®µåˆ†è¡¨æ˜ å°„é…ç½®

æ”¯æŒé€šè¿‡å…¶ä»–è¡¨çš„å­—æ®µæ¥æ„å»ºå½“å‰è¡¨çš„åˆ†è¡¨ï¼š

```properties
# åˆ†è¡¨æ˜ å°„é…ç½® (æ ¼å¼: ç›®æ ‡è¡¨=æºè¡¨.å­—æ®µå)
# ç¤ºä¾‹: é€šè¿‡ç”¨æˆ·è¡¨çš„idæ¥æ„å»ºä¿¡æ¯è¡¨çš„åˆ†è¡¨
sharding.mapping.info_table=user_table.id
sharding.mapping.order_table=user_table.id
sharding.mapping.message_table=user_table.user_id
```

### åˆ†è¡¨å­—æ®µé…ç½®

ä¸ºæ¯ä¸ªè¡¨æŒ‡å®šç”¨äºåˆ†è¡¨çš„å­—æ®µï¼š

```properties
# åˆ†è¡¨å­—æ®µé…ç½® (æ ¼å¼: è¡¨å=åˆ†è¡¨å­—æ®µå)
sharding.field.user_table=id
sharding.field.info_table=user_id
sharding.field.order_table=user_id
sharding.field.message_table=user_id
```

## åˆ†è¡¨ç­–ç•¥è¯¦è§£

### 1. Hashåˆ†è¡¨ (hash)
- **åŸç†**: å¯¹åˆ†è¡¨å­—æ®µå€¼è¿›è¡Œhashè®¡ç®—ï¼Œç„¶åå–æ¨¡åˆ†è¡¨æ•°é‡
- **é€‚ç”¨åœºæ™¯**: æ•°æ®åˆ†å¸ƒè¦æ±‚å‡åŒ€çš„åœºæ™¯
- **ä¼˜ç‚¹**: æ•°æ®åˆ†å¸ƒå‡åŒ€ï¼ŒæŸ¥è¯¢æ€§èƒ½ç¨³å®š
- **ç¼ºç‚¹**: ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢

```java
// è®¡ç®—ç¤ºä¾‹
int shardIndex = Math.abs(shardValue.hashCode()) % tableCount;
```

### 2. å–æ¨¡åˆ†è¡¨ (mod)
- **åŸç†**: å¯¹æ•°å€¼ç±»å‹çš„åˆ†è¡¨å­—æ®µç›´æ¥å–æ¨¡
- **é€‚ç”¨åœºæ™¯**: åˆ†è¡¨å­—æ®µä¸ºæ•°å€¼ç±»å‹çš„åœºæ™¯
- **ä¼˜ç‚¹**: è®¡ç®—ç®€å•ï¼Œæ€§èƒ½é«˜
- **ç¼ºç‚¹**: è¦æ±‚åˆ†è¡¨å­—æ®µå¿…é¡»æ˜¯æ•°å€¼ç±»å‹

```java
// è®¡ç®—ç¤ºä¾‹
int shardIndex = ((Number) shardValue).intValue() % tableCount;
```

### 3. èŒƒå›´åˆ†è¡¨ (range)
- **åŸç†**: æŒ‰ç…§å€¼çš„èŒƒå›´è¿›è¡Œåˆ†è¡¨
- **é€‚ç”¨åœºæ™¯**: éœ€è¦æ”¯æŒèŒƒå›´æŸ¥è¯¢çš„åœºæ™¯
- **ä¼˜ç‚¹**: æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œæ•°æ®æœ‰åº
- **ç¼ºç‚¹**: å¯èƒ½å¯¼è‡´æ•°æ®åˆ†å¸ƒä¸å‡

```java
// è®¡ç®—ç¤ºä¾‹ï¼ˆæ¯1000ä¸ªå€¼ä¸€ä¸ªåˆ†è¡¨ï¼‰
int shardIndex = Math.min(value / 1000, tableCount - 1);
```

### 4. æ—¶é—´åˆ†è¡¨ (time)
- **åŸç†**: æŒ‰ç…§æ—¶é—´è¿›è¡Œåˆ†è¡¨
- **é€‚ç”¨åœºæ™¯**: æ—¶é—´åºåˆ—æ•°æ®ï¼Œå¦‚æ—¥å¿—ã€ç›‘æ§æ•°æ®
- **ä¼˜ç‚¹**: ä¾¿äºæŒ‰æ—¶é—´æŸ¥è¯¢å’Œç»´æŠ¤
- **ç¼ºç‚¹**: å¯èƒ½å¯¼è‡´çƒ­ç‚¹æ•°æ®é›†ä¸­

```java
// è®¡ç®—ç¤ºä¾‹ï¼ˆæŒ‰å¤©åˆ†è¡¨ï¼‰
int shardIndex = (int) (System.currentTimeMillis() / (24 * 60 * 60 * 1000L)) % tableCount;
```

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ç”¨æˆ·è¡¨åˆ†è¡¨

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨ `users`ï¼Œéœ€è¦æŒ‰ç”¨æˆ·IDè¿›è¡Œåˆ†è¡¨ï¼š

#### 1. é…ç½®åˆ†è¡¨
```properties
# å¯ç”¨åˆ†è¡¨
sharding.enabled=true
sharding.strategy.type=hash
sharding.table.count=8
sharding.field.users=id
```

#### 2. åˆ›å»ºåˆ†è¡¨
```bash
# ä½¿ç”¨å¯åŠ¨å™¨è‡ªåŠ¨åˆ›å»º
java -cp target/classes com.easyjava.manager.ShardingBootstrap auto
```

#### 3. åˆ†è¡¨ç»“æœ
åŸè¡¨: `users`
åˆ†è¡¨: `users_0`, `users_1`, `users_2`, `users_3`, `users_4`, `users_5`, `users_6`, `users_7`

### ç¤ºä¾‹2: è·¨è¡¨å­—æ®µåˆ†è¡¨

å‡è®¾æˆ‘ä»¬æœ‰ç”¨æˆ·è¡¨ `users` å’Œè®¢å•è¡¨ `orders`ï¼Œå¸Œæœ›è®¢å•è¡¨æŒ‰ç”¨æˆ·IDåˆ†è¡¨ï¼š

#### 1. é…ç½®åˆ†è¡¨
```properties
# å¯ç”¨åˆ†è¡¨
sharding.enabled=true
sharding.strategy.type=hash
sharding.table.count=8

# ç”¨æˆ·è¡¨æŒ‰è‡ªå·±çš„IDåˆ†è¡¨
sharding.field.users=id

# è®¢å•è¡¨æŒ‰ç”¨æˆ·è¡¨çš„IDåˆ†è¡¨
sharding.mapping.orders=users.id
sharding.field.orders=user_id
```

#### 2. åˆ›å»ºåˆ†è¡¨
```bash
java -cp target/classes com.easyjava.manager.ShardingBootstrap auto
```

#### 3. åˆ†è¡¨ç»“æœ
- ç”¨æˆ·è¡¨: `users_0` ~ `users_7`
- è®¢å•è¡¨: `orders_0` ~ `orders_7`
- ç›¸åŒç”¨æˆ·IDçš„æ•°æ®ä¼šåˆ†é…åˆ°ç›¸åŒçš„åˆ†è¡¨ä¸­

### ç¤ºä¾‹3: æ—¶é—´åˆ†è¡¨

å¯¹äºæ—¥å¿—è¡¨ï¼ŒæŒ‰æ—¶é—´è¿›è¡Œåˆ†è¡¨ï¼š

#### 1. é…ç½®åˆ†è¡¨
```properties
sharding.enabled=true
sharding.strategy.type=time
sharding.table.count=30
sharding.table.suffix.format=_%02d
sharding.field.logs=created_time
```

#### 2. åˆ†è¡¨ç»“æœ
- åˆ†è¡¨: `logs_00` ~ `logs_29`
- æŒ‰å¤©è½®æ¢åˆ†è¡¨

## ç±»ç»“æ„è¯´æ˜

### æ ¸å¿ƒç±»ä»‹ç»

#### 1. ShardingConfig
- **ä½ç½®**: `com.easyjava.bean.ShardingConfig`
- **åŠŸèƒ½**: åˆ†è¡¨é…ç½®ä¿¡æ¯ç±»ï¼Œå­˜å‚¨æ‰€æœ‰åˆ†è¡¨ç›¸å…³é…ç½®
- **ä¸»è¦æ–¹æ³•**:
  - `needSharding(String tableName)`: æ£€æŸ¥è¡¨æ˜¯å¦éœ€è¦åˆ†è¡¨
  - `getShardingField(String tableName)`: è·å–è¡¨çš„åˆ†è¡¨å­—æ®µ
  - `getShardingMapping(String tableName)`: è·å–è¡¨çš„åˆ†è¡¨æ˜ å°„æº

#### 2. ShardingManagerï¼ˆäº¤äº’å¼ï¼‰
- **ä½ç½®**: `com.easyjava.manager.ShardingManager`
- **åŠŸèƒ½**: äº¤äº’å¼åˆ†è¡¨ç®¡ç†å™¨ï¼Œæä¾›é…ç½®å‘å¯¼å’Œåˆ†è¡¨åˆ›å»ºåŠŸèƒ½
- **é€‚ç”¨åœºæ™¯**: åˆæ¬¡é…ç½®ã€ä¿®æ”¹é…ç½®ã€å­¦ä¹ ä½¿ç”¨
- **ä¸»è¦æ–¹æ³•**:
  - `interactiveShardingConfiguration()`: äº¤äº’å¼é…ç½®åˆ†è¡¨
  - `createShardingTablesFromConfig()`: æ ¹æ®é…ç½®åˆ›å»ºåˆ†è¡¨
  - `showCurrentConfiguration()`: æ˜¾ç¤ºå½“å‰é…ç½®

#### 3. ShardingExecutorï¼ˆç›´æ¥æ‰§è¡Œï¼‰â­ï¸ æ–°å¢
- **ä½ç½®**: `com.easyjava.sharding.ShardingExecutor`
- **åŠŸèƒ½**: åˆ†è¡¨æ‰§è¡Œå™¨ï¼Œç›´æ¥è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºåˆ†è¡¨ï¼Œæ— éœ€äº¤äº’
- **é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒã€è‡ªåŠ¨åŒ–éƒ¨ç½²ã€CI/CDæµç¨‹
- **ä¸»è¦æ–¹æ³•**:
  - `executeSharding()`: ç›´æ¥æ‰§è¡Œåˆ†è¡¨åˆ›å»º
  - `validateConfiguration()`: éªŒè¯é…ç½®
  - `showConfiguration()`: æ˜¾ç¤ºé…ç½®
  - `testShardingCalculation()`: æµ‹è¯•åˆ†è¡¨ç´¢å¼•è®¡ç®—

#### 4. DynamicConfigManagerï¼ˆå¢å¼ºç‰ˆé›†æˆï¼‰
- **ä½ç½®**: `com.easyjava.manager.DynamicConfigManager`
- **åŠŸèƒ½**: åŠ¨æ€é…ç½®ç®¡ç†å™¨ï¼Œé›†æˆäº†åˆ†è¡¨é…ç½®åŠŸèƒ½
- **é€‚ç”¨åœºæ™¯**: å®Œæ•´çš„é¡¹ç›®é…ç½®ç®¡ç†
- **æ–°å¢æ–¹æ³•**:
  - `configureSharding()`: é…ç½®åˆ†è¡¨åŠŸèƒ½

### ä½¿ç”¨åœºæ™¯å¯¹æ¯”

| åœºæ™¯ | æ¨èç±» | å¯åŠ¨æ–¹å¼ | ç‰¹ç‚¹ |
|------|--------|----------|------|
| åˆæ¬¡å­¦ä¹  | ShardingManager | äº¤äº’å¼ | å‹å¥½çš„é…ç½®å‘å¯¼ |
| å¼€å‘ç¯å¢ƒ | ShardingManager | äº¤äº’å¼ | å¯éšæ—¶è°ƒæ•´é…ç½® |
| æµ‹è¯•ç¯å¢ƒ | ShardingExecutor | é…ç½®æ–‡ä»¶ | å¿«é€Ÿæ‰§è¡Œï¼Œç»“æœå¯é¢„æœŸ |
| ç”Ÿäº§ç¯å¢ƒ | ShardingExecutor | é…ç½®æ–‡ä»¶ | æ— äº¤äº’ï¼Œé€‚åˆè‡ªåŠ¨åŒ– |
| CI/CD | ShardingExecutor | é…ç½®æ–‡ä»¶ | è„šæœ¬åŒ–æ‰§è¡Œ |
| å®Œæ•´é…ç½® | DynamicConfigManager | äº¤äº’å¼ | æ•°æ®åº“+åˆ†è¡¨+åŒ…åç­‰å…¨å¥—é…ç½® |

## æœ€ä½³å®è·µ

### 1. åˆ†è¡¨æ•°é‡é€‰æ‹©
- å»ºè®®ä½¿ç”¨2çš„å¹‚æ¬¡æ–¹ï¼ˆ2, 4, 8, 16, 32...ï¼‰
- è€ƒè™‘æœªæ¥æ•°æ®å¢é•¿ï¼Œé¢„ç•™æ‰©å±•ç©ºé—´
- é¿å…åˆ†è¡¨è¿‡å¤šå¯¼è‡´ç®¡ç†å¤æ‚

### 2. åˆ†è¡¨ç­–ç•¥é€‰æ‹©
- **å‡åŒ€åˆ†å¸ƒ**: é€‰æ‹©hashç­–ç•¥
- **æ•°å€¼å­—æ®µ**: é€‰æ‹©modç­–ç•¥
- **æ—¶é—´æ•°æ®**: é€‰æ‹©timeç­–ç•¥
- **èŒƒå›´æŸ¥è¯¢**: é€‰æ‹©rangeç­–ç•¥

### 3. å­—æ®µé€‰æ‹©
- é€‰æ‹©åˆ†å¸ƒå‡åŒ€çš„å­—æ®µä½œä¸ºåˆ†è¡¨å­—æ®µ
- é¿å…ä½¿ç”¨å¯èƒ½ä¸ºç©ºçš„å­—æ®µ
- è€ƒè™‘æŸ¥è¯¢æ¨¡å¼ï¼Œé€‰æ‹©ç»å¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ

### 4. é…ç½®ç®¡ç†
- å®šæœŸå¤‡ä»½åˆ†è¡¨é…ç½®
- ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†é…ç½®æ–‡ä»¶
- åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å……åˆ†æµ‹è¯•

### 5. æ€§èƒ½ä¼˜åŒ–
- åˆç†è®¾ç½®åˆ†è¡¨æ•°é‡ï¼Œé¿å…è¿‡åº¦åˆ†è¡¨
- è€ƒè™‘æ•°æ®åº“è¿æ¥æ± é…ç½®
- ç›‘æ§åˆ†è¡¨çš„æ•°æ®åˆ†å¸ƒæƒ…å†µ

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åˆ†è¡¨åˆ›å»ºå¤±è´¥
**ç°è±¡**: åˆ†è¡¨åˆ›å»ºè¿‡ç¨‹ä¸­å‡ºç°SQLé”™è¯¯
**åŸå› **: 
- æ•°æ®åº“è¿æ¥é…ç½®é”™è¯¯
- åŸè¡¨ä¸å­˜åœ¨
- æ•°æ®åº“æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥é…ç½®
java -cp target/classes com.easyjava.manager.ShardingBootstrap check

# éªŒè¯æ•°æ®åº“è¿æ¥
java -cp target/classes com.easyjava.manager.ShardingManager validate
```

#### 2. é…ç½®åŠ è½½å¤±è´¥
**ç°è±¡**: æç¤ºæ— æ³•åŠ è½½åˆ†è¡¨é…ç½®
**åŸå› **: 
- é…ç½®æ–‡ä»¶è·¯å¾„é”™è¯¯
- é…ç½®é¡¹æ ¼å¼é”™è¯¯
- é…ç½®æ–‡ä»¶ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ `application.properties` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- éªŒè¯é…ç½®é¡¹æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®ä¿æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 

#### 3. åˆ†è¡¨ç´¢å¼•è®¡ç®—é”™è¯¯
**ç°è±¡**: æ•°æ®åˆ†å¸ƒä¸å‡åŒ€
**åŸå› **: 
- åˆ†è¡¨å­—æ®µé€‰æ‹©ä¸å½“
- åˆ†è¡¨ç­–ç•¥ä¸é€‚åˆå½“å‰æ•°æ®ç‰¹å¾

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æµ‹è¯•åˆ†è¡¨åŠŸèƒ½
java -cp target/classes com.easyjava.manager.ShardingBootstrap test
```

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—
åœ¨ `logback.xml` ä¸­æ·»åŠ ï¼š
```xml
<logger name="com.easyjava.manager" level="DEBUG"/>
```

#### 2. ä½¿ç”¨æµ‹è¯•åŠŸèƒ½
```bash
# æµ‹è¯•åˆ†è¡¨ç´¢å¼•è®¡ç®—
java -cp target/classes com.easyjava.manager.ShardingBootstrap test
```

#### 3. æ£€æŸ¥é…ç½®
```bash
# æ˜¾ç¤ºè¯¦ç»†é…ç½®
java -cp target/classes com.easyjava.manager.ShardingBootstrap show
```

## ç‰ˆæœ¬æ›´æ–°è¯´æ˜

### v1.2.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ–°å¢ `ShardingBootstrap` è‡ªåŠ¨åˆ†è¡¨å¯åŠ¨å™¨
- âœ… æ–°å¢å¿«é€Ÿå¯åŠ¨è„šæœ¬ (`sharding-start.bat` / `sharding-start.sh`)
- âœ… æ”¹è¿›åˆ†è¡¨é…ç½®éªŒè¯åŠŸèƒ½
- âœ… å¢å¼ºé”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… ä¼˜åŒ–ç”¨æˆ·äº¤äº’ç•Œé¢

### v1.1.0
- âœ… æ·»åŠ è·¨è¡¨å­—æ®µåˆ†è¡¨æ”¯æŒ
- âœ… é›†æˆåˆ°ä¸»ç¨‹åºå‘½ä»¤è¡Œå‚æ•°
- âœ… æ”¹è¿›é…ç½®æ–‡ä»¶ç®¡ç†

### v1.0.0
- âœ… åŸºç¡€åˆ†è¡¨åŠŸèƒ½
- âœ… å››ç§åˆ†è¡¨ç­–ç•¥
- âœ… äº¤äº’å¼é…ç½®å‘å¯¼

## æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥é˜…æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. ä½¿ç”¨å†…ç½®çš„æ£€æŸ¥å’Œæµ‹è¯•åŠŸèƒ½
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. åœ¨é¡¹ç›®ä»“åº“æäº¤Issue

## é™„å½•

### A. å®Œæ•´é…ç½®ç¤ºä¾‹

```properties
# EasyJava åˆ†è¡¨åŠŸèƒ½å®Œæ•´é…ç½®ç¤ºä¾‹

# ========== åŸºç¡€é…ç½® ==========
sharding.enabled=true
sharding.strategy.type=hash
sharding.table.count=8
sharding.table.suffix.format=_%d
sharding.database.write.enabled=true
sharding.sql.generate.enabled=true
sharding.sql.create.prefix=CREATE TABLE IF NOT EXISTS
sharding.auto.create.table=true

# ========== è·¨è¡¨å­—æ®µåˆ†è¡¨æ˜ å°„ ==========
# é€šè¿‡ç”¨æˆ·è¡¨çš„idå­—æ®µä¸ºå…¶ä»–è¡¨åˆ†è¡¨
sharding.mapping.user_profiles=users.id
sharding.mapping.user_orders=users.id
sharding.mapping.user_messages=users.id

# ========== åˆ†è¡¨å­—æ®µé…ç½® ==========
# æ¯ä¸ªè¡¨çš„åˆ†è¡¨å­—æ®µ
sharding.field.users=id
sharding.field.user_profiles=user_id
sharding.field.user_orders=user_id
sharding.field.user_messages=user_id
sharding.field.system_logs=created_time
```

### B. å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# ======== äº¤äº’å¼æ–¹å¼ ========
# äº¤äº’å¼åˆ†è¡¨é…ç½®ï¼ˆé€‚åˆåˆæ¬¡ä½¿ç”¨ï¼‰
java -cp target/classes com.easyjava.manager.ShardingManager config

# é€šè¿‡å¢å¼ºç‰ˆä¸»ç¨‹åºå¯åŠ¨äº¤äº’å¼é…ç½®
java -cp target/classes com.easyjava.AppEnhanced sharding

# ======== ç›´æ¥æ‰§è¡Œæ–¹å¼ ========
# ç›´æ¥æ‰§è¡Œåˆ†è¡¨åˆ›å»ºï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
java -cp target/classes com.easyjava.sharding.ShardingExecutor

# éªŒè¯åˆ†è¡¨é…ç½®
java -cp target/classes com.easyjava.sharding.ShardingExecutor validate

# æ˜¾ç¤ºåˆ†è¡¨é…ç½®
java -cp target/classes com.easyjava.sharding.ShardingExecutor show

# æµ‹è¯•åˆ†è¡¨ç´¢å¼•è®¡ç®—
java -cp target/classes com.easyjava.sharding.ShardingExecutor test

# é€šè¿‡ä¸»ç¨‹åºç›´æ¥æ‰§è¡Œåˆ†è¡¨
java -cp target/classes com.easyjava.AppEnhanced auto-sharding

# é€šè¿‡ä¸»ç¨‹åºéªŒè¯åˆ†è¡¨é…ç½®
java -cp target/classes com.easyjava.AppEnhanced check-sharding

# ======== ä½¿ç”¨è„šæœ¬ ========
# äº¤äº’å¼é…ç½®è„šæœ¬
sharding-start.bat config          # Windows
./sharding-start.sh config         # Linux/Mac

# ç›´æ¥æ‰§è¡Œè„šæœ¬
sharding-execute.bat execute       # Windows
./sharding-execute.sh execute      # Linux/Mac

# éªŒè¯é…ç½®è„šæœ¬
sharding-execute.bat validate      # Windows
./sharding-execute.sh validate     # Linux/Mac
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.2.0  
**æœ€åæ›´æ–°**: 2025å¹´7æœˆ30æ—¥  
**ä½œè€…**: EasyJavaå›¢é˜Ÿ
